package KLFitter

## authors of KLFitter
author K. Kroeninger <Kevin.Alexander.Kroeninger@cern.ch>
author J. Erdmann <johannes.erdmann@cern.ch>
author O. Nackenhorst <olaf.nackenhorst@cern.ch>

## author of cmt-based compilation
author V. Kaushik <venkat.kaushik@cern.ch>

##############################################################

private
apply_tag  ROOTBasicLibs
apply_tag  ROOTMathLibs
apply_tag  ROOTSTLDictLibs
apply_tag  ROOTGraphicsLibs
apply_tag  ROOTTableLibs
end_private

public
use AtlasPolicy        AtlasPolicy-*
use AtlasROOT          AtlasROOT-*      External
use BAT                BAT-*            External


###############################################################
#  library: libKLFitter
###############################################################


#
# Set up the rules to use the stand-alone KLFitterCore library:
#
macro KLFitter_dir "../library"
macro KLFitter_include_dir "$(KLFitter_dir)/include"

include_path none
include_dirs "$(KLFitter_include_dir)"

library  KLFitter  "$(KLFitter_dir)/src/*.cxx"

macro          KLFitter_shlibflags        "$($(ROOTSYS)/bin/root-config --libs)"
macro_append   KLFitter_shlibflags        " -lBAT"
macro_append   KLFitter_shlibflags        " -L$(ROOTSYS)/lib -lTreePlayer -lMinuit -lMinuit2 -lPhysics"


###############################################################
#  library: libKLFitterExtras
##############################################################

macro KLFitterExtras_dir "../extras"
macro KLFitterExtras_include_dir "$(KLFitterExtras_dir)/include"

include_path none
include_dirs "$(KLFitterExtras_include_dir)"

library  KLFitterExtras "$(KLFitterExtras_dir)/src/*.cxx"

## remove virtual function hidden by another warning
macro_remove cppflags "-Woverloaded-virtual"

macro          KLFitterExtras_shlibflags         $(KLFitter_shlibflags)

###############################################################
#  application: runKLFitter.exe
###############################################################

application runKLFitter -no_prototypes "../examples/top_ljets/runKLFitter.cxx"


macro       runKLFitterlinkopts      "$($(ROOTSYS)/bin/root-config --libs) \
                                     -lm $(KLFitter_shlibflags) \
                                     -lKLFitter -lKLFitterExtras "



apply_pattern declare_runtime extras="../transferfunctions*"

